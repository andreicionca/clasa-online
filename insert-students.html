<!DOCTYPE html>
<html lang="ro">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inserare Elevi</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .student-code {
        background: #f0f0f0;
        padding: 2px 8px;
        border-radius: 4px;
        font-weight: bold;
      }
      .results {
        margin-top: 20px;
      }
      .success {
        color: green;
      }
      .error {
        color: red;
      }
    </style>
  </head>
  <body>
    <h1>Inserare Elevi în Baza de Date</h1>
    <p><strong>Format cod:</strong> 6 caractere (ex: A3K7N2)</p>
    <p><strong>Caractere folosite:</strong> A-Z și 2-9 (fără confuzii)</p>

    <button onclick="insertStudents()">Inserează Elevii</button>
    <div id="results" class="results"></div>

    <script>
      // Lista cu toți elevii - exemple cu numele normale și clasa completă
      const studentsData = [
        // Clasa IX B
        { name: 'Paul-Bogdan', surname: 'Baltan', grade: 'IX B' },
        { name: 'Andrei-Dorin', surname: 'Barbos', grade: 'IX B' },
        { name: 'Luca-Vlad', surname: 'Bila', grade: 'IX B' },
        { name: 'Cristian-Aaron', surname: 'Biro', grade: 'IX B' },
        { name: 'Răzvan-Cristian', surname: 'Bledea', grade: 'IX B' },
        { name: 'Rareș-Antonio', surname: 'Blumenstein', grade: 'IX B' },
        { name: 'Alexandru-Radu', surname: 'Borca', grade: 'IX B' },
        { name: 'Emanuel', surname: 'Brezovski', grade: 'IX B' },
        { name: 'Tudor-Bogdan', surname: 'Coman', grade: 'IX B' },
        { name: 'Florin-Nicolas', surname: 'Cozma', grade: 'IX B' },
        { name: 'Matei-Mihai', surname: 'Gavriș', grade: 'IX B' },
        { name: 'Ionuț-Ștefan', surname: 'Hosu', grade: 'IX B' },
        { name: 'Cătălin-Antonio', surname: 'Luka', grade: 'IX B' },
        { name: 'Rareș-Ștefan', surname: 'Mihaila', grade: 'IX B' },
        { name: 'Andreea-Ioana', surname: 'Moga', grade: 'IX B' },
        { name: 'Filip', surname: 'Mureșan', grade: 'IX B' },
        { name: 'Luca-Darius', surname: 'Mureșan', grade: 'IX B' },
        { name: 'Aniela-Maria', surname: 'Nica', grade: 'IX B' },
        { name: 'Sebastian-Vlad', surname: 'Nistor', grade: 'IX B' },
        { name: 'Tudor-Ioan', surname: 'Piștea', grade: 'IX B' },
        { name: 'Sebastian David', surname: 'Pop', grade: 'IX B' },
        { name: 'Robert', surname: 'Racz', grade: 'IX B' },
        { name: 'Adam-István', surname: 'Szika', grade: 'IX B' },
        { name: 'Ioan', surname: 'Tiecar', grade: 'IX B' },
        { name: 'Alexandru-Petru', surname: 'Vancea', grade: 'IX B' },
        { name: 'Lucas-Darius', surname: 'Vicla', grade: 'IX B' },
        { name: 'Eduardo-Filipe', surname: 'Zoicaș', grade: 'IX B' },
      ];

      async function insertStudents() {
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = '<p>Se inserează elevii...</p>';

        try {
          const response = await fetch('/.netlify/functions/bulk-insert-students', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              students: studentsData,
            }),
          });

          const result = await response.json();

          if (result.success) {
            let html = `<h2 class="success">✅ Succes! ${result.count} elevi inserați</h2>`;
            html += '<h3>Lista cu codurile generate:</h3><ul>';

            result.students.forEach((student) => {
              html += `<li><strong>${student.surname} ${student.name}</strong> (${student.grade}) - Cod: <span class="student-code">${student.access_code}</span></li>`;
            });

            html += '</ul>';

            // Adaugă format pentru copy-paste
            html +=
              '<h3>Format pentru distribuire:</h3><textarea style="width: 100%; height: 200px;">';
            result.students.forEach((student) => {
              html += `${student.surname} ${student.name} (${student.grade}) - ${student.access_code}\n`;
            });
            html += '</textarea>';

            resultsDiv.innerHTML = html;
          } else {
            resultsDiv.innerHTML = `<p class="error">❌ Eroare: ${result.error}</p>`;
          }
        } catch (error) {
          resultsDiv.innerHTML = `<p class="error">❌ Eroare de conexiune: ${error.message}</p>`;
        }
      }
    </script>
  </body>
</html>
